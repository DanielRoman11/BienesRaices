extends ../layout/app

block styles
  link(rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css")
  //- link(rel="stylesheet", href="https://raw.githubusercontent.com/Leaflet/Leaflet.fullscreen/gh-pages/dist/leaflet.fullscreen.css")

block contenido
  //- pre= JSON.stringify(casas, undefined, 3)
  
  div(class="py-5 pb-16 text-center md:flex flex-col mx-auto justify-center items-center ")
    h1(class="text-[#4c460e] drop-shadow-lg text-xl sm:text-2xl font-bold py-2" id="titulo")= pagina
    h2(class="text-[#4c460e] drop-shadow-lg text-xs sm:text-md font-bold px-10" id="titulo")= propiedad.precio.nombre
    article(class="w-full mx-auto flex relative md:justify-start flex-col")
      #carouselExampleControls.relative(data-te-carousel-init='' data-te-ride='carousel')
        // Carousel items
        .relative.w-full.overflow-hidden(class="after:clear-both after:block after:content-[''] overflow-hidden h-96")
          div.relative.float-left.w-full.transition-transform.ease-in-out(class='-mr-[100%] duration-[600ms] motion-reduce:transition-none' data-te-carousel-item='' data-te-carousel-active='')
            img.block.w-full(src=propiedad.imagenes[0].ruta alt='Wild Landscape' class="h-96")
          
          - var sinPrimeraImagen = propiedad.imagenes.filter((elem, i) => i !== 0)
          each imagen in sinPrimeraImagen
            .relative.float-left.hidden.w-full.transition-transform.ease-in-out(class='-mr-[100%]  duration-[600ms] motion-reduce:transition-none h-[400px]' data-te-carousel-item='')
              img.block.w-full(src= imagen.ruta class="w-[100%] h-96" alt= propiedad.titulo)

        // Carousel controls - prev item
        button.absolute.bottom-0.left-0.top-0.flex.items-center.justify-center.border-0.bg-none.p-0.text-center.text-white.opacity-50.transition-opacity.duration-150(class='z-[1] w-[15%] ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-white hover:no-underline hover:opacity-90 hover:outline-none focus:text-white focus:no-underline focus:opacity-90 focus:outline-none motion-reduce:transition-none' type='button' data-te-target='#carouselExampleControls' data-te-slide='prev')
          span.inline-block.h-8.w-8
            svg.h-6.w-6(xmlns='http://www.w3.org/2000/svg' fill='none' viewbox='0 0 24 24' stroke-width='1.5' stroke='currentColor')
              path(stroke-linecap='round' stroke-linejoin='round' d='M15.75 19.5L8.25 12l7.5-7.5')
          span(class='!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]') Previous
        // Carousel controls - next item
        button.absolute.bottom-0.right-0.top-0.flex.items-center.justify-center.border-0.bg-none.p-0.text-center.text-white.opacity-50.transition-opacity.duration-150(class='z-[1] w-[15%] ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-white hover:no-underline hover:opacity-90 hover:outline-none focus:text-white focus:no-underline focus:opacity-90 focus:outline-none motion-reduce:transition-none' type='button' data-te-target='#carouselExampleControls' data-te-slide='next')
          span.inline-block.h-8.w-8
            svg.h-6.w-6(xmlns='http://www.w3.org/2000/svg' fill='none' viewbox='0 0 24 24' stroke-width='1.5' stroke='currentColor')
              path(stroke-linecap='round' stroke-linejoin='round' d='M8.25 4.5l7.5 7.5-7.5 7.5')
          span(class='!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]') Next



      div(class="flex absolute items-center rounded-full space-x-2 bg-[#615a18]/40 backdrop-blur-md z-10 px-10 py-2 left-1 top-5 sm:left-4 text-white font-semibold")
        svg(xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4 sm:size-6")
          path(stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5l-1.5-.5M6.75 7.364V3h-3v18m3-13.636l10.5-3.819")
        h1(class="text-xs sm:text-base")= propiedad.categoria.nombre

      div(class="text-sm font-sans font-medium lg:text-md pb-5 rounded-b-md bg-transparent space-y-5")
        div(class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 text-center border border-[#4c460e]/25 py-5 items-center")
          p.text-gray-600.font-semibold.text-sm Habitaciones
            span.text-gray-800.block.text-base= propiedad.habitaciones
          p.text-gray-600.font-semibold.text-sm Estacionamiento
            span.text-gray-800.block.text-base= propiedad.estacionamiento
          p.text-gray-600.font-semibold.text-sm Ba√±os
            span.text-gray-800.block.text-base= propiedad.wc
        h4(class="text-2xl text-center text-[#3a360f] leading-6 font-bold") Informaci√≥n de la propiedad
        p(class="text-[#4c460e] text-center")= propiedad.descripcion


    article(class="w-full mx-auto mt-10 sm:mt-0")
      div(class="h-96 rounded-md border border-double border-[#4c460e]/25" id="mapa")
        p(id="lng").hidden= propiedad.lng
        p(id="lat").hidden= propiedad.lat
      p(class="text-md py-2 text-center text-[#4c460e] font-semibold") üìåDirecci√≥n: 
        span.font-bold=propiedad.calle
    
    
    if !esVendedor
      h4(class="text-2xl text-center text-[#3a360f] leading-6 font-bold mt-5") Informaci√≥n de contacto

      if errores
        each error in errores
          #error.bg-red-600.px-2.py-1.rounded-sm.mt-2
            p.text-center.text-red-200.font-bold.text-sm ‚ö†Ô∏è #{error.msg}
        
      if !usuario
        .flex.justify-center.gap-2.mt-10(class="text-[#3a360f")
          p Para contactar al vendedor debes 
          a(class="font-bold" href="/auth/registro") Crear una cuenta
      else
        form.mt-10.w-full(method= "post")
          label(for="mensaje") ¬øTe interesa esta propiedad? üì© Env√≠a un mensaje! üöÄ
          textarea(id="mensaje" name="mensaje" class="w-full p-2 border rounded-lg shadow-md border-slate-200 placeholder-slate-400 contrast-more:border-slate-500 contrast-more:placeholder-slate-600 h-32" placeholder ="Escribe tu mensaje al vendedor de la propiedad")

          input(type="submit", value="Env√≠a un mensaje" class="bg-[#3a360f] w-full text-white font-bold uppercase text-sm p-2 cursor-pointer rounded-md")
  
block scripts
  script(src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js")
  script(src="/js/mostrarMapa.js")
  script(src="/js/tw-elements.js" type="module")
  script(src='/tw-elements/dist/js/tw-elements.umd.min.js' type='text/javascript')
  
  if errores
    script(type="module" src="/js/scrollDown.js")
